<Configure id="Server" class="org.mortbay.jetty.Server">

    <!-- create and configure the rewrite handler -->
    <New id="Rewrite" class="org.mortbay.jetty.handler.RewriteHandler">
        <Set name="rewriteRequestURI">true</Set>
        <Set name="rewritePathInfo">false</Set>
        <Set name="originalPathAttribute">requestedPath</Set>

        <!-- redirect the response. This is a redirect which is visible to the browser.
             After the redirect, the browser address bar will show /redirected -->
        <!--<Call name="addRule">-->
            <!--<Arg>-->
                <!--<New class="org.mortbay.jetty.handler.rewrite.RedirectPatternRule">-->
                    <!--<Set name="pattern">/redirect/*</Set>-->
                    <!--<Set name="location">/redirected</Set>-->
                <!--</New>-->
            <!--</Arg>-->
        <!--</Call>-->

        <!-- This rewrites the base URL; supports Regex. This is visible to the browser. -->
        <!--<Call name="addRule">-->
            <!--<Arg>-->
                <!--<New class="org.mortbay.jetty.handler.rewrite.RedirectRegexRule">-->
                    <!--<Set name="regex">(^(?!/base/path/).*)</Set>-->
                    <!--<Set name="replacement">/base/path/</Set>-->
                <!--</New>-->
            <!--</Arg>-->
        <!--</Call>-->
    </New>

    <!-- rewrite the request URI. This is an internal rewrite, visible to server,
         but the browser will still show /some/old/context -->
    <!--<Call name="addRule">-->
        <!--<Arg>-->
            <!--<New class="org.mortbay.jetty.handler.rewrite.RewritePatternRule">-->
                <!--<Set name="pattern">/some/old/context</Set>-->
                <!--<Set name="replacement">/some/new/context</Set>-->
            <!--</New>-->
        <!--</Arg>-->
    <!--</Call>-->

    <!-- reverse the order of the path sections. Internal rewrite -->
    <!--<Call name="addRule">-->
        <!--<Arg>-->
            <!--<New class="org.mortbay.jetty.handler.rewrite.RewriteRegexRule">-->
                <!--<Set name="regex">/reverse/([^/]*)/(.*)</Set>-->
                <!--<Set name="replacement">/reverse/$2/$1</Set>-->
            <!--</New>-->
        <!--</Arg>-->
    <!--</Call>-->

    <!-- add the rewrite handler to the server -->
    <Set name="handler">
        <Ref id="Rewrite"/>
    </Set>

</Configure>